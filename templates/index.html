<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>成理工程教务系统助手</title>
  <link rel="stylesheet" href="/static/app.css" />
  <script defer src="/static/app.js"></script>
</head>
<body>
  <div class="page">
    <header class="hero">
      <div>
        <p class="badge">CDUT ETC Assistant</p>
        <h1>成理工程教务系统助手</h1>
        <p class="subtitle">一站式管理登录、课表、成绩与提醒，现代化统一操作界面。</p>
        <div class="hero-actions">
          <button class="primary" data-action="check-user-info">检查账号状态</button>
          <button class="ghost" data-action="auto-login">使用已保存账号登录</button>
        </div>
      </div>
      <div class="hero-card">
        <h3>系统状态</h3>
        <ul>
          <li>账号信息：<span id="user-info-status">未知</span></li>
          <li>课表刷新：<span id="timetable-refresh-status">未执行</span></li>
          <li>成绩初始化：<span id="score-init-status">未执行</span></li>
        </ul>
      </div>
    </header>

    <section class="grid">
      <div class="card">
        <h2>账号登录</h2>
        <p>登录教务系统，用于抓取课表与成绩数据。</p>
        <form data-form="login">
          <label>
            学号
            <input name="username" type="text" placeholder="输入账号" required />
          </label>
          <label>
            密码
            <input name="password" type="password" placeholder="输入密码" required />
          </label>
          <div class="actions">
            <button class="primary" type="submit">登录</button>
            <button class="ghost" type="button" data-action="auto-login">自动登录</button>
          </div>
        </form>
      </div>

      <div class="card">
        <h2>用户信息与邮件设置</h2>
        <p>用于成绩邮件通知功能。</p>
        <form data-form="user-info">
          <label>
            学号
            <input name="username" type="text" placeholder="账号" />
          </label>
          <label>
            密码
            <input name="password" type="password" placeholder="密码" />
          </label>
          <label>
            发送邮箱
            <input name="email_sender" type="email" placeholder="sender@example.com" />
          </label>
          <label>
            邮箱密码/授权码
            <input name="email_password" type="password" placeholder="授权码" />
          </label>
          <label>
            接收邮箱
            <input name="email_to" type="email" placeholder="receiver@example.com" />
          </label>
          <div class="actions">
            <button class="primary" type="submit">保存用户信息</button>
            <button class="ghost" type="button" data-action="enable-email">启用邮件通知</button>
            <button class="ghost" type="button" data-action="disable-email">关闭邮件通知</button>
          </div>
        </form>
      </div>
    </section>

    <section class="grid">
      <div class="card">
        <h2>课表功能</h2>
        <div class="stack">
          <button class="primary" data-action="refresh-timetable">刷新课表</button>
          <button data-action="get-everyday">获取完整课表</button>
          <button data-action="get-today">今日课程</button>
          <button data-action="get-now">当前课程</button>
        </div>
        <form data-form="class-after-days">
          <label>
            几天后课程
            <input name="days" type="number" min="1" placeholder="例如 2" required />
          </label>
          <button class="ghost" type="submit">查询</button>
        </form>
        <form data-form="class-by-date">
          <label>
            指定日期课程
            <input name="date" type="text" placeholder="例如 2026-01-16" required />
          </label>
          <button class="ghost" type="submit">查询</button>
        </form>
        <form data-form="class-by-text">
          <label>
            智能查询（如“后天”）
            <input name="text" type="text" placeholder="例如 明天" required />
          </label>
          <button class="ghost" type="submit">查询</button>
        </form>
      </div>

      <div class="card">
        <h2>成绩功能</h2>
        <div class="stack">
          <button class="primary" data-action="score-init">初始化成绩数据</button>
          <button data-action="score-update">更新成绩数据</button>
          <button data-action="score-all">历史成绩</button>
          <button data-action="score-semester">本学期成绩</button>
          <button data-action="score-credits">累计学分统计</button>
          <button data-action="score-retake">重修缴费统计</button>
        </div>
      </div>
    </section>

    <section class="card result-card">
      <div class="result-header">
        <h2>结果输出</h2>
        <button class="ghost" data-action="clear-result">清空</button>
      </div>
      <pre id="result-output">等待操作...</pre>
    </section>
  </div>

  <div class="modal" id="disclaimer-modal" aria-hidden="true">
    <div class="modal-content">
      <h2>免责声明</h2>
      <p>本工具仅用于学习与个人事务管理，请确保账号信息安全，合理使用教务系统服务。</p>
      <p>继续使用即表示你已知悉并同意自行承担使用本工具产生的风险。</p>
      <button class="primary" data-action="accept-disclaimer">我已了解并同意</button>
    </div>
  </div>
</body>
</html>
